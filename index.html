<!DOCTYPE html>
<html lang="de">
<head>
	<meta charset="utf-8">
	<title>c-base Austrittsgenerator</title>


	<link rel="stylesheet" href="./css/foundation.min.css">

	<script type="text/javascript" src="./js/jquery-1.9.1.min.js"></script>
	<script type="text/javascript" src="./js/foundation.min.js"></script>
	<script type="text/javascript" src="./js/jspdf.js"></script>
	<script type="text/javascript" src="./js/libs/Deflate/adler32cs.js"></script>
	<script type="text/javascript" src="./js/libs/FileSaver.js/FileSaver.js"></script>
	<script type="text/javascript" src="./js/libs/Blob.js/BlobBuilder.js"></script>
	<script type="text/javascript" src="./js/jspdf.plugin.ie_below_9_shim.js"></script>
	<script type="text/javascript" src="./js/jspdf.plugin.split_text_to_size.js"></script>
	<script type="text/javascript" src="./js/jspdf.plugin.standard_fonts_metrics.js"></script>
	<script type="text/javascript" src="./js/mustache.js"></script>
	
</head>

<body>
	<div class="row" style="max-width:50em">
		<h1>c-base Austrittsgenerator</h1>
  <div class="small-12"><div class="panel">
  	<label>Identifizierungsmerkmale</label>
<div class="row">
      <div class="large-4 columns">
        <input type="text" placeholder="Name" id="name">
      </div>
      <div class="large-4 columns">
        <input type="text" placeholder="Nick" id="nick">
      </div>
      <div class="large-4 columns">
        <input type="text" placeholder="Member UID" id="memberid">
      </div>
    </div>

    <div class="row">
      <div class="large-12 columns">
        <label>Austrittsgrund (optional)</label>
        <textarea name="reason" cols="50" rows="10" id="reason"></textarea>
      </div>
    </div>

    <div class="row">
      <div class="large-12 columns">
        <label>Grußformel</label>
        <select id="valediction">
        	<option>Mit freundlichen Grüßen,</option>
        	<option>Mit unfreundlichen Grüßen,</option>
        	<option>Hochachtungsvoll,</option>
        	<option>Enttäuscht,</option>
        	<option>Genervt,</option>
        	<option>Voller Wut,</option>
        </select>
      </div>
    </div>
</div>

<a href="javascript:renderPDF()" class="button success">Download</a></div>
</div>

<script>

var organisations = {
	0:{
		"name":"c-base e.V.",
		"zusatz":"z.Hd. Vorstand",
		"address":"Rungestr. 20",
		"city":"10179 Berlin"
	}
}

function renderPDF() {

	var name= $("#name").val()
	var nick = $("#nick").val()
	var memberid= $("#memberid").val()
	var organisation= $("#organisation").val()
	var reason= $("#reason").val()
	var valediction= $("#valediction option:selected").val()

		var view = {
	  name: name,
		nick: nick,
	  memberid: memberid,
	  reason: reason
	};

	var text = Mustache.render("Sehr geehrter Vorstand,\n\nHiermit beende ich, {{name}} (Nick: {{nick}}, Mitgliedsnummer: {{memberid}}) meine Mitgliedschaft beim c-base e.V. {{reason}}", view);

	var doc = new jsPDF();
	doc.setFontSize(13);

	doc.text(27,  53, organisations[organisation]["name"]);
	doc.text(27,  53, organisations[organisation]["zusatz"]);
	doc.text(27,  61, organisations[organisation]["address"]);
	doc.text(27,  69, organisations[organisation]["city"]);

	doc.setFontSize(16);
	lines = doc.splitTextToSize(text, 180)
	doc.text(20, 100, lines)

	doc.text(20, 200, valediction);
	doc.setDrawColor(100,100,100);
	doc.line(20, 215, 80, 215);
	doc.text(20, 222, name)
	doc.output("datauri");
}
</script>
</body>
</html>
